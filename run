#!/usr/bin/env bash
set -o nounset -o xtrace

trap exit INT

declare -a ips=(
    104.248.60.35
    18.27.79.17
    80.241.209.102
    5.9.93.196
    162.17.167.210
    179.222.141.191
    35.201.13.82
    118.25.12.97
    177.32.134.186
    120.48.45.238
    34.101.186.228
    118.163.120.179
    34.126.115.35
    151.197.58.114
    52.27.151.162
    210.2.64.112
    73.11.44.170
    47.133.212.102
    216.188.233.105
    173.48.112.106
    73.137.92.144
    63.234.121.181
    174.107.165.224
    93.108.104.209
    173.79.6.204
)

for ip in "${ips[@]}"
do
    timeout 2 cargo run --quiet -- do-handshake "$ip:${port:-8333}"
done